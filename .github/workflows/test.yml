name: Run Make Test

on:
  push:
    branches:
      - '**'  # Run on all branches
  pull_request:

jobs:
  test:
    runs-on: ubuntu-latest

  steps:
        - name: Checkout code
          uses: actions/checkout@v3

        - name: Set up Docker
          run: sudo apt-get update && sudo apt-get install -y docker.io

        - name: Build Docker image
          run: docker build -t fwc .

        - name: Run make test (Docker)
          run: docker run -p 8124:8124 --rm fwc make test
